<!-- /* RMIT University Vietnam
Course: COSC2430 Web Programming
Semester: 2023B
Assessment: Assignment 2
Author: Abhinaya Bimata Pandega , Santoso David , Tran Pham Quoc Vy , Rybak Polina , Grigory Kovtun 
ID: S3963166, S3824107, S4011912, S3969997, S3927476 
Acknowledgement: */ -->

<!DOCTYPE html>
<html lang="en">

<head>
  <title> Cart! </title>
<%- include('fixedParts/head.ejs') %>
<link rel="stylesheet" href="/css/cart.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" />
  </head>

  <body>
    <%- include('fixedParts/header.ejs') %>

      </header>
      <section class="">
                  <div class="cartpage">
                    <div class="">
                      <div class="">
                        <div class="">
                          <h1 class="cart">Cart</h1>
                          <h6 class=""><%products.length %></h6>
                        </div>

                        <% if(products.length == 0) { %>
                          <h6 class="cart">Your cart is empty!</h6>
                       <% }else{ %>
                        <% products.forEach(product => { %>
                          <hr class="">
                          <div class="">
                          <div class="cartimage">
                            <img
                            src="data:<%= product.image.contentType %>;base64,<%= product.image.data.toString('base64') %>"
                            alt="Product Image" height="150px" width="225px" />
                          </div>
                          <div class="">
                            <h6 class="cartproduct"><%=product.name %></h6>
                          </div>
                          <a href="/cart/delete/<%=product._id%>" class="remove">‚ùå</a>
                          <form action="/cart/delete/<%=product._id%>" method="POST">
                          </form>
                        </div>
                       <% }); %>
                     <%  }  %>
                    
                      </div>
                    </div>
                    <div class="summary">
                      <div class="">
                        <h3 class="summary">Summary</h3>
                        <div class="productsummary">
                          <% products.forEach(product => { %>
                            <h6><%=product.name%> - $<%=product.price%> </h6>
                         <% }); %>
                        </div>
                        <div class="">
                          <h5 class="summary">Total</h5>
                          <% let totalPrice = 0; %>
                          <% products.forEach((product) =>{ %>
                            <% totalPrice += product.price; %>
                          <% }); %>
                          <h5>$<%=totalPrice%></h5>
                        </div>

                        <a href="/payment/" type="button" class="purchase"
                          data-mdb-ripple-color="dark">Purchase</a>
                      </div>
                    </div>
                  </div>
                  <img src="/css/logo.png" class="cart"> 
      </section>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<!-- Core theme JS-->
<script src="/js/scripts.js"></script>
</body>
<div class="footer" id="navbarfooter">
  <ul class="footer">
    <li class="footer">
      <a class="footer-link"> Copyright</a>
    </li>
    <li class="footer">
      <a href="/about" class="footer-link">
        About
      </a>
    </li>
    <li class="footer">
      <a class="footer-link"> Privacy </a>
    </li>
    <li class="footer">
      <a class="footer-link"> Help !</a>
    </li>
  </ul>
</div>
</html>